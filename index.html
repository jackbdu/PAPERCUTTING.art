<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <link rel="manifest" href="manifest.json" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PAPERCUTTING.art</title>
    <script src="%VITE_P5_CDN%"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5.capture@1.6.0/dist/p5.capture.umd.min.js"></script>
    <style>
      body {
        display: none;
      }
    </style>
  </head>
  <body class="hide-help">
    <main id="app"></main>
    <aside id="help">
      <!-- Top Bar: Language + Close -->
      <div id="help-topbar">
        <div id="language-toggle">
          <button id="lang-en" onclick="setLanguage('en')">English</button>
          <button id="lang-zh" onclick="setLanguage('zh')">ç®€ä½“ä¸­æ–‡</button>
          <button id="lang-zh-hant" onclick="setLanguage('zh-Hant')">ç¹é«”ä¸­æ–‡</button>
        </div>
        <button id="close-help" aria-label="Close Help">
          <svg width="20" height="20" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>

      <!-- Feedback Button -->
      <div id="feedback-container">
        <a id="feedback-button" href="#" target="_blank" aria-label="Send Feedback">Feedback</a>
      </div>

      <!-- English Content -->
      <div id="content-en" lang="en">
        <div class="entry-note">
          ğŸ‘‰ <strong>Click anywhere</strong> on the page to <span class="important">start</span>.<br />
          <ul>
            <li><strong>Press and hold</strong> to start a cut</li>
            <li><strong>Drag</strong> to define your cutting path</li>
            <li><strong>Only one cutting path</strong> can exist at a time</li>
            <li>You can continue a path if you start from one of its ends</li>
            <li class="important">A cut completes only if the path intersects itself or touches the paper edge</li>
            <li><strong>Scroll</strong> to zoom in and out</li>
            <li><strong>Double click</strong> to exit interaction mode (regain mouse control)</li>
          </ul>
        </div>

        <h2>Keyboard Shortcuts</h2>

        <h3>View</h3>
        <ul>
          <li><code>H</code>: Toggle help panel visibility</li>
          <li><code>F</code>: Toggle fullscreen</li>
          <li><code>S</code>: Toggle scissors visibility</li>
          <li><code>A</code>: Toggle cutting aim visibility</li>
        </ul>

        <h3>Edit</h3>
        <ul>
          <li><code>â†</code>: Rotate counterclockwise</li>
          <li><code>â†’</code>: Rotate clockwise</li>
          <li><code>â†‘</code>: Flip horizontally</li>
          <li><code>â†“</code>: Flip vertically</li>
          <li>
            <span class="action-key"><code>Z</code></span
            >: Undo
          </li>
          <li>
            <span class="action-key"><code>Shift+Z</code></span
            >: Redo
          </li>
          <li class="note">âœ‚ï¸ After a successful cut, the algorithm keeps one piece. If itâ€™s not what you expected, use <code>Undo</code> and then click the piece you want to discard.</li>
        </ul>

        <h3>Reference Image</h3>
        <ul>
          <li><code>C</code>: Capture still from webcam <br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="note">ğŸ“¸ First time may ask for camera permission and take a few seconds to load</span></li>
          <li><code>L</code>: Load saved user reference image</li>
          <li><code>O</code>: Show built-in reference image</li>
          <li><code>Space</code>: Toggle reference image visibility</li>
        </ul>

        <h3>Export & Loading</h3>
        <ul>
          <li>
            <span class="action-key"><code>S</code></span
            >: Export current papercut as JSON
          </li>
          <li>
            <span class="action-key"><code>E</code></span
            >: Export current papercut as SVG
          </li>
          <li>
            <span class="action-key"><code>O</code></span
            >: Export current papercut as PNG
          </li>
        </ul>

        <h3>Presets</h3>
        <ul>
          <li><code>0</code>: Load saved papercut from local storage</li>
          <li><code>1â€“7</code>: Load preset paper shapes</li>
          <li><code>8</code>: Load â€œæ˜¥â€ papercut</li>
          <li><code>9</code>: Load â€œartist's portraitâ€ papercut</li>
        </ul>

        <p class="note">ğŸ’¡ You can also <strong>drag and drop</strong> a previously exported JSON file to load a design, or an image file to use as an overlay â€” both will be stored in your browserâ€™s local storage for later use.</p>
      </div>

      <!-- Chinese Content -->
      <div id="content-zh" lang="zh" style="display: none">
        <div class="entry-note">
          ğŸ‘‰ <strong>ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®</strong>ä»¥<span class="important">å¼€å§‹å‰ªçº¸</span>ã€‚<br />
          <ul>
            <li><strong>æŒ‰ä½é¼ æ ‡</strong>å¼€å§‹å‰ªåˆ‡</li>
            <li><strong>æ‹–æ‹½é¼ æ ‡</strong>ä»¥å®šä¹‰å‰ªåˆ‡è·¯å¾„</li>
            <li><strong>æ¯æ¬¡åªèƒ½å­˜åœ¨ä¸€æ¡å‰ªåˆ‡è·¯å¾„</strong></li>
            <li>å¦‚æœä»å·²æœ‰è·¯å¾„çš„ç«¯ç‚¹å¼€å§‹ï¼Œå¯ä»¥ç»§ç»­å»¶ä¼¸</li>
            <li class="important">å‰ªçº¸åªæœ‰åœ¨è·¯å¾„å½¢æˆé—­ç¯æˆ–è§¦ç¢°åˆ°çº¸å¼ è¾¹ç¼˜æ—¶æ‰ç®—å®Œæˆ</li>
            <li><strong>æ»šåŠ¨é¼ æ ‡</strong>å¯ä»¥ç¼©æ”¾è§†å›¾</li>
            <li><strong>åŒå‡»</strong>é€€å‡ºäº¤äº’æ¨¡å¼ï¼ˆæ¢å¤é¼ æ ‡æ§åˆ¶ï¼‰</li>
          </ul>
        </div>

        <h2>é”®ç›˜å¿«æ·é”®</h2>

        <h3>è§†å›¾</h3>
        <ul>
          <li><code>H</code>ï¼šæ˜¾ç¤º/éšè—å¸®åŠ©é¢æ¿</li>
          <li><code>F</code>ï¼šåˆ‡æ¢å…¨å±æ¨¡å¼</li>
          <li><code>S</code>ï¼šæ˜¾ç¤º/éšè—å‰ªåˆ€</li>
          <li><code>A</code>ï¼šæ˜¾ç¤º/éšè—å‰ªåˆ‡ç‚¹</li>
        </ul>

        <h3>ç¼–è¾‘</h3>
        <ul>
          <li><code>â†</code>ï¼šé€†æ—¶é’ˆæ—‹è½¬</li>
          <li><code>â†’</code>ï¼šé¡ºæ—¶é’ˆæ—‹è½¬</li>
          <li><code>â†‘</code>ï¼šæ°´å¹³ç¿»è½¬</li>
          <li><code>â†“</code>ï¼šå‚ç›´ç¿»è½¬</li>
          <li>
            <span class="action-key"><code>Z</code></span
            >ï¼šæ’¤é”€
          </li>
          <li>
            <span class="action-key"><code>Shift+Z</code></span
            >ï¼šé‡åš
          </li>
          <li class="note">âœ‚ï¸ æˆåŠŸåˆ‡å‰²åï¼Œç®—æ³•ä¼šä¿ç•™å…¶ä¸­ä¸€å—ã€‚å¦‚æœä¸æ˜¯ä½ æƒ³ä¿ç•™çš„éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨<code>æ’¤é”€</code>ï¼Œç„¶åç‚¹å‡»ä½ æƒ³è¦ä¸¢å¼ƒçš„é‚£å—ã€‚</li>
        </ul>

        <h3>å‚è€ƒå›¾</h3>
        <ul>
          <li><code>C</code>ï¼šç”±æ‘„åƒå¤´æ‹æ‘„ç…§ç‰‡<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="note">ğŸ“¸ ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶å¯èƒ½ä¼šè¯·æ±‚æ‘„åƒå¤´æƒé™ï¼Œå¹¶éœ€è¦å‡ ç§’é’ŸåŠ è½½</span></li>
          <li><code>L</code>ï¼šåŠ è½½å·²ä¿å­˜çš„ç”¨æˆ·å›¾åƒå åŠ </li>
          <li><code>O</code>ï¼šæ˜¾ç¤ºå†…ç½®å›¾åƒä½œä¸ºå‚è€ƒå›¾</li>
          <li><code>Space</code>ï¼šæ˜¾ç¤º/éšè—å‚è€ƒå›¾</li>
        </ul>

        <h3>å¯¼å‡ºä¸åŠ è½½</h3>
        <ul>
          <li>
            <span class="action-key"><code>S</code></span
            >ï¼šå°†å½“å‰å‰ªçº¸å¯¼å‡ºä¸º JSON
          </li>
          <li>
            <span class="action-key"><code>E</code></span
            >ï¼šå°†å½“å‰å‰ªçº¸å¯¼å‡ºä¸º SVG
          </li>
          <li>
            <span class="action-key"><code>O</code></span
            >ï¼šå°†å½“å‰å‰ªçº¸å¯¼å‡ºä¸º PNG
          </li>
        </ul>

        <h3>é¢„è®¾</h3>
        <ul>
          <li><code>0</code>ï¼šä»æœ¬åœ°å­˜å‚¨åŠ è½½å·²ä¿å­˜çš„è®¾è®¡</li>
          <li><code>1â€“7</code>ï¼šåŠ è½½é¢„è®¾çš„çº¸å¼ å½¢çŠ¶</li>
          <li><code>8</code>ï¼šåŠ è½½â€œæ˜¥â€å­—å‰ªçº¸</li>
          <li><code>9</code>ï¼šåŠ è½½â€œè‰ºæœ¯å®¶çš„è‚–åƒâ€å‰ªçº¸</li>
        </ul>

        <p class="note">ğŸ’¡ ä½ ä¹Ÿå¯ä»¥<strong>æ‹–æ‹½</strong>ä¸€ä¸ªä¹‹å‰å¯¼å‡ºçš„ JSON æ–‡ä»¶ä»¥åŠ è½½è¯¥å‰ªçº¸ï¼Œæˆ–æ‹–æ‹½ä¸€å¼ å›¾ç‰‡ä½œä¸ºå‚è€ƒå›¾ â€”â€” ä¸¤è€…éƒ½ä¼šè¢«å­˜å‚¨åœ¨ä½ çš„æµè§ˆå™¨æœ¬åœ°ï¼Œä¾›ä»¥åä½¿ç”¨ã€‚</p>
      </div>

      <!-- Traditional Chinese Content -->
      <div id="content-zh-hant" lang="zh-Hant" style="display: none">
        <div class="entry-note">
          ğŸ‘‰ <strong>é»æ“Šé é¢ä»»æ„ä½ç½®</strong>ä»¥<span class="important">é–‹å§‹å‰ªç´™</span>ã€‚<br />
          <ul>
            <li><strong>æŒ‰ä½æ»‘é¼ </strong>é–‹å§‹å‰ªåˆ‡</li>
            <li><strong>æ‹–æ›³æ»‘é¼ </strong>ä»¥å®šç¾©å‰ªåˆ‡è·¯å¾‘</li>
            <li><strong>æ¯æ¬¡åªèƒ½å­˜åœ¨ä¸€æ¢å‰ªåˆ‡è·¯å¾‘</strong></li>
            <li>å¦‚æœå¾å·²æœ‰è·¯å¾‘çš„ç«¯é»é–‹å§‹ï¼Œå¯ä»¥ç¹¼çºŒå»¶ä¼¸</li>
            <li class="important">å‰ªç´™åªæœ‰åœ¨è·¯å¾‘å½¢æˆé–‰ç’°æˆ–è§¸ç¢°åˆ°ç´™å¼µé‚Šç·£æ™‚æ‰ç®—å®Œæˆ</li>
            <li><strong>æ»¾å‹•æ»‘é¼ </strong>å¯ä»¥ç¸®æ”¾è¦–åœ–</li>
            <li><strong>é›™æ“Š</strong>é€€å‡ºäº’å‹•æ¨¡å¼ï¼ˆæ¢å¾©æ»‘é¼ æ§åˆ¶ï¼‰</li>
          </ul>
        </div>

        <h2>éµç›¤å¿«æ·éµ</h2>

        <h3>è¦–åœ–</h3>
        <ul>
          <li><code>H</code>ï¼šé¡¯ç¤º/éš±è—èªªæ˜é¢æ¿</li>
          <li><code>F</code>ï¼šåˆ‡æ›å…¨è¢å¹•æ¨¡å¼</li>
          <li><code>S</code>ï¼šé¡¯ç¤º/éš±è—å‰ªåˆ€</li>
          <li><code>A</code>ï¼šé¡¯ç¤º/éš±è—å‰ªåˆ‡ç„æº–é»</li>
        </ul>

        <h3>ç·¨è¼¯</h3>
        <ul>
          <li><code>â†</code>ï¼šé€†æ™‚é‡æ—‹è½‰</li>
          <li><code>â†’</code>ï¼šé †æ™‚é‡æ—‹è½‰</li>
          <li><code>â†‘</code>ï¼šæ°´å¹³ç¿»è½‰</li>
          <li><code>â†“</code>ï¼šå‚ç›´ç¿»è½‰</li>
          <li>
            <span class="action-key"><code>Z</code></span
            >ï¼šå¾©åŸ
          </li>
          <li>
            <span class="action-key"><code>Shift+Z</code></span
            >ï¼šé‡åš
          </li>
          <li class="note">âœ‚ï¸ æˆåŠŸå‰ªåˆ‡å¾Œï¼Œç³»çµ±æœƒä¿ç•™å…¶ä¸­ä¸€å¡Šã€‚å¦‚æœä¸æ˜¯ä½ æƒ³ä¿ç•™çš„éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨<code>å¾©åŸ</code>ï¼Œç„¶å¾Œé»æ“Šä½ æƒ³æ¨æ£„çš„é‚£å¡Šã€‚</li>
        </ul>

        <h3>åƒè€ƒåœ–</h3>
        <ul>
          <li><code>C</code>ï¼šç”±æ”å½±æ©Ÿæ‹æ”åƒè€ƒåœ–<br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="note">ğŸ“¸ ç¬¬ä¸€æ¬¡ä½¿ç”¨æ™‚å¯èƒ½æœƒè¦æ±‚æ”å½±æ©Ÿæ¬Šé™ï¼Œä¸¦éœ€è¦å¹¾ç§’é˜åŠ è¼‰</span></li>
          <li><code>L</code>ï¼šè¼‰å…¥å·²å„²å­˜çš„ä½¿ç”¨è€…åƒè€ƒåœ–</li>
          <li><code>O</code>ï¼šé¡¯ç¤ºå…§å»ºåƒè€ƒåœ–</li>
          <li><code>Space</code>ï¼šåˆ‡æ›åƒè€ƒåœ–é¡¯ç¤º</li>
        </ul>

        <h3>åŒ¯å‡ºèˆ‡è¼‰å…¥</h3>
        <ul>
          <li>
            <span class="action-key"><code>S</code></span
            >ï¼šå°‡ç•¶å‰å‰ªç´™åŒ¯å‡ºç‚º JSON
          </li>
          <li>
            <span class="action-key"><code>E</code></span
            >ï¼šå°‡ç•¶å‰å‰ªç´™åŒ¯å‡ºç‚º SVG
          </li>
          <li>
            <span class="action-key"><code>O</code></span
            >ï¼šå°‡ç•¶å‰å‰ªç´™åŒ¯å‡ºç‚º PNG
          </li>
        </ul>

        <h3>é è¨­æ¨£å¼</h3>
        <ul>
          <li><code>0</code>ï¼šå¾æœ¬æ©Ÿå„²å­˜è¼‰å…¥å·²å„²å­˜çš„å‰ªç´™</li>
          <li><code>1â€“7</code>ï¼šè¼‰å…¥é è¨­ç´™å¼µå½¢ç‹€</li>
          <li><code>8</code>ï¼šè¼‰å…¥ã€Œæ˜¥ã€å­—å‰ªç´™</li>
          <li><code>9</code>ï¼šè¼‰å…¥ã€Œè—è¡“å®¶è‚–åƒã€å‰ªç´™</li>
        </ul>

        <p class="note">ğŸ’¡ ä½ ä¹Ÿå¯ä»¥<strong>æ‹–æ›³</strong>ä¹‹å‰åŒ¯å‡ºçš„ JSON æª”æ¡ˆä¾†è¼‰å…¥å‰ªç´™è¨­è¨ˆï¼Œæˆ–æ‹–æ›³ä¸€å¼µåœ–ç‰‡ä½œç‚ºåƒè€ƒåœ– â€”â€” å…©è€…éƒ½æœƒè¢«å„²å­˜åœ¨ç€è¦½å™¨çš„æœ¬æ©Ÿå„²å­˜ä¸­ï¼Œä»¥ä¾¿æ—¥å¾Œä½¿ç”¨ã€‚</p>
      </div>
    </aside>

    <footer>PAPERCUTTING.art by <a href="https://jackbdu.com/about" target="_blank">Jack B. Du</a> â¤ï¸ <a href="https://github.com/jackbdu/PAPERCUTTING.art">Learn More</a></footer>

    <script>
      const feedbackLinks = {
        en: { href: "https://forms.gle/csjv8GqBMoQMZZ647", label: "ğŸ’¬ Feedback" },
        zh: { href: "https://www.wjx.cn/vm/YUYOt1Z.aspx", label: "ğŸ’¬ ä½¿ç”¨åé¦ˆ" },
        "zh-Hant": { href: "https://www.wjx.cn/vm/hJk7yn2.aspx", label: "ğŸ’¬ æ„è¦‹å›é¥‹" },
      };

      const feedbackButton = document.getElementById("feedback-button");

      function setLanguage(lang) {
        document.getElementById("content-en").style.display = lang === "en" ? "block" : "none";
        document.getElementById("content-zh").style.display = lang === "zh" ? "block" : "none";
        document.getElementById("content-zh-hant").style.display = lang === "zh-Hant" ? "block" : "none";

        document.getElementById("lang-en")?.classList.toggle("active", lang === "en");
        document.getElementById("lang-zh")?.classList.toggle("active", lang === "zh");
        document.getElementById("lang-zh-hant")?.classList.toggle("active", lang === "zh-Hant");

        // Set feedback link and label
        const info = feedbackLinks[lang];
        if (info) {
          feedbackButton.href = info.href;
          feedbackButton.textContent = info.label;
        }
      }

      // Auto-detect on page load
      window.addEventListener("DOMContentLoaded", () => {
        const userLang = (navigator.language || navigator.userLanguage || "").toLowerCase();

        if (userLang.startsWith("zh-hant") || userLang.startsWith("zh-tw") || userLang.startsWith("zh-hk") || userLang.startsWith("zh-mo")) {
          setLanguage("zh-Hant"); // Traditional Chinese
        } else if (userLang.startsWith("zh")) {
          setLanguage("zh"); // Simplified Chinese
        } else {
          setLanguage("en"); // Default to English
        }

        document.getElementById("close-help").addEventListener("click", () => {
          document.body.classList.add("hide-help");
        });
      });
    </script>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
